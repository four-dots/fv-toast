import{provide as e,onMounted as t,onBeforeUnmount as o,openBlock as l,createElementBlock as n,renderSlot as a,ref as s,inject as i,watch as c,nextTick as d,normalizeClass as r,createElementVNode as g,Fragment as u,createTextVNode as h,toDisplayString as f,createCommentVNode as p,createVNode as v,Transition as y,withCtx as m,withDirectives as b,vShow as _}from"vue";import w from"mitt";import{nanoid as C}from"nanoid";const k=w(),A={name:"bv-accordions",props:{single:{default:!0,type:Boolean}},setup(l,{slots:n}){const a=[],s=n.default()[0].children.length,i=e=>{let t=a.reduce(((t,o)=>o.id===e?t:(o.state=!1,[o.id,...t])),[]);k.emit("accordion.close",t)},c=({accordionId:e,state:t})=>{l.single&&t&&a.find((t=>t.id===e))&&i(e)};e("registerChild",(e=>{a.push(e),a.length===s&&(()=>{if(!l.single)return;let e=null;for(const t of a)if(e||(e=t.state?t.id:null),e)break;e&&i(e)})()})),t((()=>{k.on("accordion.toggle",c)})),o((()=>{k.off("accordion.toggle")}))}},E={class:"bv-accordions"};A.render=function(e,t,o,s,i,c){return l(),n("section",E,[a(e.$slots,"default")])};const S={name:"bv-accordion",props:{usesFontAwesome:{type:Boolean,default:!0},togglable:{type:Boolean,default:!0},open:{type:Boolean,default:!1}},emits:["toggle"],setup(e,{emit:t}){const l=s(e.open),n=C(),a=i("registerChild",null),r=async()=>{e.togglable&&(await d(),l.value=!l.value,t("toggle",l.value),k.emit("accordion.toggle",{accordionId:n,state:l.value}))};return k.on("accordion.close",(t=>{l.value&&e.togglable&&t.includes(n)&&(l.value=!1)})),a&&a({id:n,state:l.value}),o((()=>k.off("accordion.close"))),c((()=>e.open),(e=>{e!==l.value&&r()})),{accordionId:n,state:l,toggle:r,enter:async e=>{const t=getComputedStyle(e).width;e.style.width=t,e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto";const o=getComputedStyle(e).height;e.style.width=null,e.style.position=null,e.style.visibility=null,e.style.height=0,getComputedStyle(e).height,await d(),e.style.height=o},afterEnter:e=>{e.style.height="auto"},leave:async e=>{const t=getComputedStyle(e).height;e.style.height=t,getComputedStyle(e).height,await d(),e.style.height=0}}}},B=["data-accordion-id"],I={class:"bv-accordion__header"},$={key:0,class:"icon"},F={class:"bv-accordion__actions"},L={class:"bv-accordion__content content"};S.render=function(e,t,o,s,i,c){return l(),n("section",{class:r(["bv-accordion",{"bv-accordion--without-toggle":!o.togglable,"is-open":s.state}]),"data-accordion-id":s.accordionId},[g("header",I,[o.togglable?(l(),n("div",{key:0,class:"bv-accordion__toggle",onClick:t[0]||(t[0]=(...e)=>s.toggle&&s.toggle(...e))},[o.usesFontAwesome?(l(),n("span",$,[g("i",{class:r(["fas fal",[s.state?"fa-minus":"fa-plus"]])},null,2)])):(l(),n(u,{key:1},[h(f(s.state?"-":"+"),1)],64))])):p("",!0),g("div",{class:"bv-accordion__title",onClick:t[1]||(t[1]=(...e)=>s.toggle&&s.toggle(...e))},[a(e.$slots,"title")]),g("div",F,[a(e.$slots,"actions")])]),v(y,{name:"bv-accordion-toggle",onEnter:s.enter,onAfterEnter:s.afterEnter,onLeave:s.leave},{default:m((()=>[b(g("article",L,[a(e.$slots,"content",{state:s.state})],512),[[_,s.state]])])),_:3},8,["onEnter","onAfterEnter","onLeave"])],10,B)};var x=e=>{e.component("Accordion",S),e.component("Accordions",A)};export{x as default};
//# sourceMappingURL=bulma-vue-accordion.es.js.map
