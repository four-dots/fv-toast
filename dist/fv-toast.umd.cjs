(function(e,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue"),require("marked"),require("mitt"),require("nanoid")):typeof define=="function"&&define.amd?define(["vue","marked","mitt","nanoid"],l):(e=typeof globalThis<"u"?globalThis:e||self,e.FVToast=l(e.vue,e.marked,e.mitt,e.nanoid))})(this,(function(e,l,g,h){"use strict";class v{constructor(s,t){this.startedAt=Date.now(),this.callback=s,this.delay=t,this.timer=setTimeout(s,t)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const d=g(),y=["innerHTML"],T={__name:"Toast",props:{toastId:{type:String,required:!0},message:{type:String,required:!0},toastState:{type:String,default:"fv-toast__message--success"},position:{type:String,default:"right",validator:o=>["right","left"].includes(o)},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onClose:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},pauseOnHover:{type:Boolean,default:!0}},setup(o){const s=o,t=e.ref(!1),n=s.message&&l.marked(s.message);let a=null;const i=()=>{a?.stop(),t.value=!1,s.onClose.apply(null,arguments),setTimeout(()=>d.emit("toast.delete",s.toastId),150)},r=()=>{t.value=!0,a=new v(i,s.duration)},u=()=>{s.dismissible&&(s.onClick.apply(null,arguments),i())},f=p=>{!s.pauseOnHover||a===null||(p?a.pause():a.resume())};return d.on("toast.clear",i),e.onMounted(r),e.onBeforeUnmount(()=>d.off("toast.clear",i)),(p,c)=>(e.openBlock(),e.createBlock(e.Transition,{"enter-active-class":"fv-toast--fade-in-up","leave-active-class":"fv-toast--fade-out"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{role:"alert",class:e.normalizeClass(["fv-toast__message",[o.toastState,`fv-toast__message--${o.position}`]]),onMouseover:c[0]||(c[0]=k=>f(!0)),onMouseleave:c[1]||(c[1]=k=>f(!1)),onClick:u},[e.createElementVNode("p",{class:"fv-toast__text",innerHTML:e.unref(n)},null,8,y)],34),[[e.vShow,t.value]])]),_:1}))}},m=new Map,_=o=>{const s=m.get(o);s&&(s.unmount(),m.delete(o),document.querySelector(`[data-toast-id="${o}"]`)?.remove())},S=(o,s={toastState:"fv-toast__message--success"})=>(d.on("toast.delete",_),{open(t){const n=h.nanoid(),a=typeof t=="string"?t:null;t=typeof t=="string"?{}:t;const i={message:a,toastId:n,...s,...t},r=document.createElement("div");r.setAttribute("data-toast-id",n),r.classList.add("fv-toast");const u=e.createApp(T,i);u.mount(r),document.getElementById("fv-toasts").appendChild(r),m.set(n,u)},clear(){d.emit("toast.clear")},error(t,n={}){return this.open({message:t,toastState:"fv-toast__message--danger",...n})},info(t,n={}){return this.open({message:t,toastState:"fv-toast__message--info",...n})},warning(t,n={}){return this.open({message:t,toastState:"fv-toast__message--warning",...n})}});return(o,s={})=>{const t=document.createElement("div");t.id="fv-toasts",t.className="fv-toasts",document.body.appendChild(t),o.config.globalProperties.$toast=S(o,s),o.provide("toast",o.config.globalProperties.$toast)}}));
//# sourceMappingURL=fv-toast.umd.cjs.map
