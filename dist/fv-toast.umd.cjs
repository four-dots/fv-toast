(function(n,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue"),require("marked"),require("mitt"),require("nanoid")):typeof define=="function"&&define.amd?define(["vue","marked","mitt","nanoid"],r):(n=typeof globalThis<"u"?globalThis:n||self,n.FVToast=r(n.vue,n.marked,n.mitt,n.nanoid))})(this,function(n,r,m,f){"use strict";class g{constructor(o,t){this.startedAt=Date.now(),this.callback=o,this.delay=t,this.timer=setTimeout(o,t)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const l=m(),p=(e,o)=>{const t=e.__vccOpts||e;for(const[s,i]of o)t[s]=i;return t},v={name:"fv-toast",props:{toastId:{type:String,required:!0},message:{type:String,required:!0},toastState:{type:String,default:"fv-toast__message--success"},position:{type:String,default:"right",validator:e=>["right","left"].includes(e)},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onClose:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},pauseOnHover:{type:Boolean,default:!0}},setup(e){const o=n.ref(!1),t=e.message&&r.marked(e.message);let s=null;const i=()=>{s.stop(),o.value=!1,e.onClose.apply(null,arguments),setTimeout(()=>l.emit("toast.delete",e.toastId),150)},d=()=>{o.value=!0,s=new g(i,e.duration)},a=()=>{e.dismissible&&(e.onClick.apply(null,arguments),i())},c=S=>{e.pauseOnHover&&(S?s.pause():s.resume())};return l.on("toast.clear",i),n.onMounted(d),n.onBeforeUnmount(()=>l.off("toast.clear",i)),{visible:o,parsedMessage:t,triggerClick:a,toggleTimer:c}}},h=["innerHTML"];function _(e,o,t,s,i,d){return n.openBlock(),n.createBlock(n.Transition,{"enter-active-class":"fv-toast--fade-in-up","leave-active-class":"fv-toast--fade-out"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{role:"alert",class:n.normalizeClass(["fv-toast__message",[t.toastState,`fv-toast__message--${t.position}`]]),onMouseover:o[0]||(o[0]=a=>s.toggleTimer(!0)),onMouseleave:o[1]||(o[1]=a=>s.toggleTimer(!1)),onClick:o[2]||(o[2]=(...a)=>s.triggerClick&&s.triggerClick(...a))},[n.createElementVNode("p",{class:"fv-toast__text",innerHTML:s.parsedMessage},null,8,h)],34),[[n.vShow,s.visible]])]),_:1})}const y=p(v,[["render",_]]),u=new Map,T=e=>{var t;const o=u.get(e);o&&(o.unmount(),u.delete(e),(t=document.querySelector(`[data-toast-id="${e}"]`))==null||t.remove())},k=(e,o={toastState:"fv-toast__message--success"})=>(l.on("toast.delete",T),{open(t){const s=f.nanoid(),i=typeof t=="string"?t:null;t=typeof t=="string"?{}:t;const d={message:i,toastId:s,...o,...t},a=document.createElement("div");a.setAttribute("data-toast-id",s),a.classList.add("fv-toast");const c=n.createApp(y,d);c.mount(a),document.getElementById("fv-toasts").appendChild(a),u.set(s,c)},clear(){l.emit("toast.clear")},error(t,s={}){return this.open({message:t,toastState:"fv-toast__message--danger",...s})},info(t,s={}){return this.open({message:t,toastState:"fv-toast__message--info",...s})},warning(t,s={}){return this.open({message:t,toastState:"fv-toast__message--warning",...s})}});return(e,o={})=>{const t=document.createElement("div");t.id="fv-toasts",t.className="fv-toasts",document.body.appendChild(t),e.config.globalProperties.$toast=k(e,o),e.provide("toast",e.config.globalProperties.$toast)}});
//# sourceMappingURL=fv-toast.umd.cjs.map
