{"version":3,"file":"bulma-vue-accordion.umd.cjs","sources":["../src/bus.js","../src/Accordions.vue","../src/options.js","../src/Accordion.vue","../src/index.js"],"sourcesContent":["import mitt from 'mitt';\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n    <section class=\"bv-accordions\"><slot></slot></section>\n</template>\n\n<script>\nimport {onBeforeUnmount, onMounted, provide} from 'vue';\n\nimport eventBus from './bus.js';\n\nexport default {\n    name: 'bv-accordions',\n    props: {\n        single: {\n            default: true,\n            type: Boolean,\n        },\n    },\n    setup(props, {slots}) {\n        const children = [];\n        const registeredAccordions = slots.default()[0].children.length;\n\n        const dispatchCloseEvent = (accordionId) => {\n            let accordionsToClose = children.reduce((carry, child) => {\n                if (child.id === accordionId) return carry;\n                child.state = false;\n                return [child.id, ...carry];\n            }, []);\n\n            eventBus.emit('accordion.close', accordionsToClose);\n        };\n\n        const closeAccordions = ({accordionId, state}) => {\n            if (!props.single || !state) return;\n            if (!children.find((child) => child.id === accordionId)) return;\n\n            dispatchCloseEvent(accordionId);\n        };\n\n        const closeOtherAccordions = () => {\n            if (!props.single) return;\n            let openAccordion = null;\n\n            for (const child of children) {\n                openAccordion ||= child.state ? child.id : null;\n                if (openAccordion) break;\n            }\n\n            if (!openAccordion) return;\n            dispatchCloseEvent(openAccordion);\n        };\n\n        const registerChild = (child) => {\n            children.push(child);\n            if (children.length !== registeredAccordions) return;\n            closeOtherAccordions();\n        };\n\n        provide('registerChild', registerChild);\n\n        onMounted(() => eventBus.on('accordion.toggle', closeAccordions));\n        onBeforeUnmount(() => eventBus.off('accordion.toggle'));\n    },\n};\n</script>\n","export default {\n    data: {\n        baseIconClass: 'fas',\n        openClass: 'fa-minus',\n        closedClass: 'fa-plus',\n        openComponent: null,\n        closedComponent: null,\n    },\n\n    getOptions() {\n        return this.data;\n    },\n    setOptions(options) {\n        for (const key in options) {\n            if (Object.hasOwn(this.data, key)) {\n                this.data[key] = options[key];\n            }\n        }\n    },\n    setOption(key, value) {\n        if (!Object.hasOwn(this.data, key)) return;\n        this.data[key] = value;\n    },\n};\n","<template>\n    <section\n        class=\"bv-accordion\"\n        :data-accordion-id=\"accordionId\"\n        :class=\"{'bv-accordion--without-toggle': !togglable, 'is-open': state}\"\n    >\n        <header class=\"bv-accordion__header\">\n            <div v-if=\"togglable\" class=\"bv-accordion__toggle\" @click=\"toggle\">\n                <template v-if=\"state\">\n                    <span v-if=\"options.baseIconClass\" class=\"icon\"\n                        ><i :class=\"[options.baseIconClass, options.openClass]\"></i\n                    ></span>\n                    <component v-if=\"options.openComponent\" :is=\"options.openComponent\"></component>\n                </template>\n                <template v-else>\n                    <span v-if=\"options.baseIconClass\" class=\"icon\"\n                        ><i :class=\"[options.baseIconClass, options.closedClass]\"></i\n                    ></span>\n                    <component v-if=\"options.closedComponent\" :is=\"options.closedComponent\"></component>\n                </template>\n            </div>\n            <div class=\"bv-accordion__title\" @click=\"toggle\"><slot name=\"title\"></slot></div>\n            <div class=\"bv-accordion__actions\"><slot name=\"actions\"></slot></div>\n        </header>\n        <transition name=\"bv-accordion-toggle\" @enter=\"enter\" @after-enter=\"afterEnter\" @leave=\"leave\">\n            <article v-show=\"state\" class=\"bv-accordion__content content\">\n                <slot name=\"content\" v-bind:state=\"state\"></slot>\n            </article>\n        </transition>\n    </section>\n</template>\n\n<script>\nimport {ref, nextTick, onBeforeUnmount, watch, inject} from 'vue';\nimport {nanoid} from 'nanoid';\n\nimport eventBus from './bus.js';\nimport optionsStore from './options.js';\n\nexport default {\n    name: 'bv-accordion',\n    props: {\n        togglable: {\n            type: Boolean,\n            default: true,\n        },\n        open: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    emits: ['toggle'],\n    setup(props, {emit}) {\n        const state = ref(props.open);\n        const accordionId = nanoid();\n        const registerChild = inject('registerChild', null);\n\n        const toggle = async () => {\n            if (!props.togglable) return;\n            await nextTick();\n\n            state.value = !state.value;\n            emit('toggle', state.value);\n            eventBus.emit('accordion.toggle', {accordionId, state: state.value});\n        };\n\n        const trigger = async (newState) => {\n            await nextTick();\n\n            state.value = newState;\n            emit('toggle', state.value);\n            eventBus.emit('accordion.toggle', {accordionId, state: state.value});\n        };\n\n        const enter = async (element) => {\n            const width = getComputedStyle(element).width;\n\n            element.style.width = width;\n            element.style.position = 'absolute';\n            element.style.visibility = 'hidden';\n            element.style.height = 'auto';\n\n            const height = getComputedStyle(element).height;\n\n            element.style.width = null;\n            element.style.position = null;\n            element.style.visibility = null;\n            element.style.height = 0;\n\n            getComputedStyle(element).height;\n            await nextTick();\n            element.style.height = height;\n        };\n\n        const afterEnter = (element) => {\n            element.style.height = 'auto';\n        };\n\n        const leave = async (element) => {\n            const height = getComputedStyle(element).height;\n            element.style.height = height;\n\n            getComputedStyle(element).height;\n            await nextTick();\n            element.style.height = 0;\n        };\n\n        const close = (accordionsToClose) => {\n            if (!state.value || !props.togglable || !accordionsToClose.includes(accordionId)) return;\n            state.value = false;\n        };\n\n        eventBus.on('accordion.close', close);\n\n        if (registerChild) {\n            registerChild({id: accordionId, state: state.value});\n        }\n\n        onBeforeUnmount(() => eventBus.off('accordion.close'));\n\n        watch(\n            () => props.open,\n            (value) => {\n                if (value === state.value) return;\n                toggle();\n            }\n        );\n\n        const options = optionsStore.getOptions();\n\n        return {accordionId, state, toggle, trigger, enter, afterEnter, leave, options};\n    },\n};\n</script>\n","import Accordions from './Accordions.vue';\nimport Accordion from './Accordion.vue';\nimport './assets/style.scss';\n\nimport optionsStore from './options.js';\n\nexport default (app, options) => {\n    optionsStore.setOptions(options);\n\n    app.component('Accordion', Accordion);\n    app.component('Accordions', Accordions);\n};\n"],"names":["emitter","mitt","_sfc_main","props","slots","children","registeredAccordions","dispatchCloseEvent","accordionId","accordionsToClose","carry","child","eventBus","closeAccordions","state","closeOtherAccordions","openAccordion","registerChild","provide","onMounted","onBeforeUnmount","_hoisted_1","_openBlock","_createElementBlock","_renderSlot","_ctx","optionsStore","options","key","value","emit","ref","nanoid","inject","toggle","nextTick","trigger","newState","enter","element","width","height","afterEnter","leave","close","watch","_hoisted_2","_hoisted_5","_hoisted_6","_normalizeClass","$props","$setup","_createElementVNode","args","_Fragment","_hoisted_3","_createBlock","_resolveDynamicComponent","_hoisted_4","_createVNode","_Transition","_withDirectives","app","Accordion","Accordions"],"mappings":"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"}